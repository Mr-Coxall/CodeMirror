<!doctype html>
<head>
<script src="lib/codemirror.js"></script>
<link rel="stylesheet" href="lib/codemirror.css">
<script src="mode/python/python.js"></script>

<style>
body {
  background-color: #eee;
}
</style>
</head>
<body>
<div id="codeeditor"></div>
<script>

var editor = CodeMirror(document.getElementById("codeeditor"), {
  lineNumbers: true,
  matchBrackets: true,
  indentUnit: 4
  });

</script>

<script type="text/javascript">
  
function saveCodeFunction() {      
// your CodeMirror textarea ID
var textToWrite = document.getElementById("codeeditor").value;

// preserving line breaks
//var textToWrite = textToWrite.replace(/\n/g, "\r\n");

var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});

// filename to save as
var fileNameToSaveAs = "FILENAME.txt";

var downloadLink = document.createElement("a");
downloadLink.download = fileNameToSaveAs;

// hidden link title name
downloadLink.innerHTML = "LINKTITLE";

window.URL = window.URL || window.webkitURL;

downloadLink.href = window.URL.createObjectURL(textFileAsBlob);

downloadLink.onclick = destroyClickedElement;
downloadLink.style.display = "none";
document.body.appendChild(downloadLink);
downloadLink.click();
}

function destroyClickedElement(event) {
document.body.removeChild(event.target);
}

</script>

<input type="button" value="Save ..." onclick="saveCodeFunction();">
</body>
</html>